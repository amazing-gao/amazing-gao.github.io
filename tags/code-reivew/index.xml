<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>code reivew on Amazing-Gao å®åœ¨æ˜¯é«˜</title><link>/tags/code-reivew/</link><description>Recent content in code reivew on Amazing-Gao å®åœ¨æ˜¯é«˜</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><managingEditor>amazing.gao@qq.com (AmazingGao)</managingEditor><webMaster>amazing.gao@qq.com (AmazingGao)</webMaster><copyright>Amazing-Gao â€” All rights reserved.</copyright><lastBuildDate>Fri, 22 Oct 2021 10:40:09 +0800</lastBuildDate><atom:link href="/tags/code-reivew/index.xml" rel="self" type="application/rss+xml"/><item><title>Go Code Review</title><link>/posts/2021/10/go/codereview/</link><pubDate>Fri, 22 Oct 2021 10:40:09 +0800</pubDate><author>amazing.gao@qq.com (AmazingGao)</author><guid>/posts/2021/10/go/codereview/</guid><description>ä»¥æ­¤è®°å½•é‚£äº›å¹´ Code Review é‡åˆ°çš„å‘ğŸ˜‚ã€‚
å˜é‡ä½œç”¨åŸŸ å˜é‡åº”è¯¥éµå¾ªæœ€å°ä½œç”¨åŸŸçš„åŸåˆ™ï¼Œå¦è€…å¯èƒ½å¼•èµ·é”™ä¹±ã€‚
æ¡ˆä¾‹1 å‡½æ•°çš„åŠŸèƒ½æ˜¯ï¼šå°† MongoDB æ•°æ®åº“ä¸­æ‰€æœ‰ offline æ˜¯ false çš„è®°å½•ï¼ŒåŒæ­¥åˆ° Redis ä¸­ã€‚
Bad tmpl çš„ä½œç”¨åŸŸåœ¨ for å¾ªç¯ä¹‹å¤–ï¼Œåœ¨å¯¹æ¯æ¡æŸ¥è¯¢ç»“æœåš cursor.Decode æ—¶ tmpl å˜é‡æœªè¢«é‡ç½®ï¼Œè¿™é€ æˆä¹‹å‰è®°å½•çš„å€¼å¯èƒ½æ®‹ç•™åœ¨è¿™æ¬¡ cursor.Decode çš„ç»“æœä¸­ï¼Œä»è€Œå¯¼è‡´æ•°æ®é”™ä¹±ã€‚
1func Foo(ctx context.Context) error { 2 cursor, err := mongodb.Database(&amp;#34;baz&amp;#34;).Collection(&amp;#34;qux&amp;#34;).Find(ctx, mongodb.M{&amp;#34;offline&amp;#34;: false}) 3 4 // tmpl çš„ä½œç”¨åŸŸæ˜¯åœ¨ for å¾ªç¯ä¹‹å¤– 5 tmpl := &amp;amp;Tmpl{} 6 for cursor.Next(ctx) { 7 if err := cursor.Decode(tmpl); err != nil { 8 return err 9 } 10 11 bytes, err := json.</description></item></channel></rss>